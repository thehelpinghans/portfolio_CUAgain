<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  th:replace="~{layout/admin :: adminLayout(~{this::head}, ~{::main})}">
<head>
	<!--필요한 head 추가-->
	<script src="https://kit.fontawesome.com/8dd87b7874.js" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
	<link rel="stylesheet" href="/css/depart/department.css">
<script type="text/javascript">

$(document).ready(function(){
	$(".btn_toggle_tree").click(function(){
    	$(".org_tree").slideToggle(400);
	});
	$(".btn_depart_menu").click(function(){
		var btnId = $(this).prop("id");
		var count= btnId.slice(-1);
		
		$(`#menuList_${count}`).slideToggle(400);
	});
	$(".btn_tree_team").click(function(){
		$(".team_name").slideToggle(400);
	});
});


</script>
</head>
<main>	
	<div class="container view_size_depa">
		<!-- 부서관리 타이틀 -->
		<div class="content_head">
			<div class="title_cover flex">
				<span>부서관리</span>
			</div>			
		</div>
		<div class="content_depart center">
		<!-- 부서관리 내용 -->
		<!-- 데이터 다 뿌려줘야함. -->
			<div class="contents_body">
				<div class="member_view  flex">
					<div class="organization">
					
						<section>
							<button type="button" class="btn_toggle_tree">
								<i class="fa-solid fa-sort-down"></i>&nbsp;
								<i class="fa-regular fa-building"></i>&nbsp;
								<span class="corp_name">&nbsp;&nbsp;CUAgain(회사명)</span>
							</button>
						</section>
						
						<section>
							<div class="org_tree">
								<ul class="tree_team">
									<li class="depart_name">
											<table class="dep-table">
												<tbody>
													<tr class="dep-tr2" th:each= "dto : ${list}">
														<button type="button" class="btn_tree_team">&nbsp;&nbsp;
															<td><i class="fa-solid fa-sort-down"></i></td>
															&nbsp;&nbsp;&nbsp;&nbsp;
															<td><i class="fa-solid fa-user-group"></i></td>
															&nbsp;&nbsp;&nbsp;&nbsp;
										 					<td th:text="${dto.name}"></td>
															<td>
																<button type="button" class="btn_depart_menu" th:id="|menuBtn_${dtoStat.count}|"> 
																	<i class="fa-regular fa-ellipsis-vertical"></i>
																</button>
															</td>
														</button>
								    				</tr>
							    				</tbody>
											</table>
											<div th:id="|menuList_${dtoStat.count}|" class="depart_menu flex" th:each= "dto : ${list}">
												<p><a href="#">부서명 수정</a></p>
												<p><a href="#">팀명추가</a></p>
												<p><a href="#">부서 삭제</a></p>
												
											</div>
									</li>
								</ul>
							</div><!-- div class="org_tree" 회사명 누르면 나옴  -->
						</section>
					</div><!-- div class="organization" -->
				</div><!-- div class="member_view  flex" -->
			</div><!-- div class="contents_body" -->
		</div><!-- div class="content_depart center" -->
	</div><!-- div class="container view_size_depa" -->
</main>
</html>